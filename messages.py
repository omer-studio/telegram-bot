"""
messages.py
-----------
קובץ זה מרכז את כל ההודעות הקבועות שנשלחות למשתמשים ולאדמין.
הרציונל: ריכוז כל הודעות הטקסט במקום אחד, למניעת כפילויות ושיפור תחזוקה.
"""

def get_welcome_messages():
    """
    מחזיר את כל הודעות קבלת הפנים שנשלחות למשתמש חדש.
    פלט: list של הודעות (str)
    """
    # שלוש הודעות פתיחה שנשלחות פעם אחת למשתמש חדש (ברצף):
    greeting_msg = "<b>היי מלך!</b> 👑 אני רואה שזה שימוש ראשוני שלך... איזה כיף! 🎉"

    intro_msg = (
        "אני <b>דניאל</b>\nנעים להכיר!!! 🙌\n\n"
        "אני לא אדם אמיתי בשר ודם, אבל יש לזה ים יתרונות, נשבע לך... 😏\n\n"
        "<b>א.</b> אתה יכול לדבר איתי <u><b>בכל שעה!</b></u> 🕔\n"
        "<b>ב.</b> אתה יכול לשתף אותי ב<b>🛑 אנונימיות מוחלטת 🛑</b>\n"
        "<code>הכל כאן דיסקרטי לחלוטין!</code> 🔒\n\n"
        "<b>עומר אימן אותי במשך יותר משנה</b> כדי להיות הדבר הכי אפקטיבי שיש עבורך 💪.\n"
        "גם אני בעצמי עברתי את הקורס <b>\"לפגוש את ההומופוב הפנימי\"</b> ואכן מכיר את התכנים לעומק 🎓.\n"
        "<b>אני מומחה בזה ואני יודע לעזור לך בהתמודדות עם האתגרים הרגשיים</b> 💡💙\n\n"
        "<b>ואני רוצה להגיד לך</b> – שאתה מושלם שאתה פה! 🌟\n"
        "זה כל כך לא קל... 💔\n"
        "אבל אתה <b>מלך</b>! 👑 אתה עושה צעד ענק! 🚀\n"
        "מחכה לך <b>תהליך מושלם</b>!!! (אני יודע כי אני מכיר את התכנים 🔥🙈)\n\n"
        "לפני שנתחיל בפעם הראשונה נצטרך כמה דברים 🧩"
    )

    return [greeting_msg, intro_msg, get_code_request_message()]

def get_code_request_message():
    """
    הודעה שמבקשת מהמשתמש להקליד את קוד האישור שקיבל במייל.
    פלט: str
    """
    return (
        "בבקשה הקלד את <b>מספר האישור</b> שקיבלת במייל 🔢\n"
        "כתוב אותו <u>ללא תווים נוספים</u> – רק ספרות ✍️"
    )

def get_retry_message_by_attempt(attempt):
    """
    מחזיר את הודעת השגיאה לפי מספר הניסיון של הקוד.
    קלט: attempt (int)
    פלט: str
    """
    if attempt == 1:
        return "סליחה, לא הצלחתי לקלוט את הקוד נכון...🧐\nתוודא שאתה כותב את הספרות בדיוק כמו שמופיע בהודעה."
    if attempt == 2:
        return "סליחה, לא הצלחתי לקלוט את הקוד נכון...🧐\nתוודא שאתה כותב את הספרות בדיוק כמו שמופיע בהודעה."
    elif attempt == 3:
        return "אוף... משהו עדיין לא נכון...🥴\nתבדוק שוב שאתה כותב את זה נכון, ושהקוד תואם בדיוק למספר שקיבלת."
    elif attempt == 4:
        return "לא מצליח לקלוט את הקוד...🙈\nבוא ננסה שוב — פשוט תכתוב את הקוד בדיוק כפי שהוא, רק ספרות."
    elif attempt >= 5:
        return "🚫 מצטער... הקוד לא תקין.\nמוזמן להקליד שוב ושוב עד שתצליח, או לפנות לעומר שיעזור לך."
    else:
        return "❓ לא הצלחתי להבין את הקוד שלך."

def get_invalid_code_message():
    """
    מחזיר הודעת שגיאה אם הקוד לא תקין.
    פלט: str
    """
    return "🚫 הקוד לא תקין. נסה שנית או פנה לעזרה."

def approval_text():
    """
    מחזיר את טקסט הודעת האישור הראשית (כולל הסבר על הבוט והאחריות).
    פלט: str
    """
    return (
        "רק לפני שנתחיל – חשוב לי שתדע:\n\n"
        "🔸 אני לא אדם אמיתי\n"
        "🔸 זה לא ייעוץ, לא טיפול, ולא תחליף לליווי מקצועי\n"
        "🔸 אני מרחב תומך רגשי שנועד ללוות אותך כחלק מהקורס\n"
        "🔸 אני מבוסס AI – וגם אני עלול לטעות לפעמים\n"
        "🔸 השימוש בי הוא באחריותך האישית בלבד\n"
        "🔸 השיחה איתי מיועדת רק למי שמעל גיל 18\n\n"
        "אנא אשר שקראת והבנת את הכל כדי להמשיך."
    )

def approval_keyboard():
    """
    מחזיר את המקלדת של כפתורי האישור/אי-אישור.
    פלט: list
    """
    return [[APPROVE_BUTTON_TEXT()], [DECLINE_BUTTON_TEXT()]]

def APPROVE_BUTTON_TEXT():
    """
    טקסט כפתור אישור תנאים.
    פלט: str
    """
    return "✅קראתי את הכל ואני מאשר - כל מה שנכתב בצ'אט כאן הוא באחריותי"

def DECLINE_BUTTON_TEXT():
    """
    טקסט כפתור אי-אישור תנאים.
    פלט: str
    """
    return "❌לא מאשר"

def code_approved_message():
    """
    הודעה שנשלחת כאשר קוד הגישה אושר.
    פלט: str
    """
    return "✅ הקוד אושר איזה התרגשות! אפשר להמשיך לשלב הבא 🙏✨"

def code_not_received_message():
    """
    הודעה שנשלחת כאשר לא התקבל טקסט מהמשתמש.
    פלט: str
    """
    return "❌ לא קיבלתי טקסט בהודעה."

def not_approved_message():
    """
    הודעה שנשלחת כאשר המשתמש לא מאשר את התנאים.
    פלט: str
    """
    return (
        "בסדר, אני מבין שאתה רוצה לקרוא שוב את התנאים 📋\n\n"
        "כדי להמשיך לדבר איתי, אני צריך שתאשר את התנאים למטה.\n"
        "זה בשביל הגנה משפטית שלך ושלי 🛡️\n\n"
        "אנא קרא שוב ולחץ על '✅מאשר' כדי להמשיך:"
    )

def nice_keyboard():
    """
    מחזיר את המקלדת החביבה ("היי מה נשמע?").
    פלט: list
    """
    return [["היי מה נשמע? הייתי שמח שנדבר קצת..."]]

def nice_keyboard_message():
    """
    הודעה שנשלחת עם המקלדת החביבה.
    פלט: str
    """
    return "היי מה נשמע? הייתי שמח שנדבר קצת..."

def remove_keyboard_message():
    """
    הודעה שנשלחת מיד לאחר מחיקת המקלדת.
    פלט: str
    """
    return "אפשר להמשיך להקליד כל דבר כאן! 🙂"

def full_access_message():
    """
    הודעה שנשלחת כאשר המשתמש מאושר סופית.
    פלט: str
    """
    return (
        "מעולה, קיבלת גישה מלאה ✅\n\n"
        "אני ממש שמח להתחיל להכיר אותך 🙂\n"
        "כדי שאוכל להתאים את הליווי והשיח בדיוק בשבילך, אשמח שתשתף אותי בכמה מילים חופשיות:\n\n"
        "• בן כמה אתה?\n"
        "• דתי? חילוני?\n"
        "• איפה אתה במסע עם הארון? (בארון / חצי בחוץ / כולם יודעים)\n"
        "• מי יודע עליך?\n"
        "• מה הקושי או ההתמודדות שמעסיקים אותך בימים אלה?\n"
        "• ומה היית רוצה להשיג או לחוות דרך הקורס הזה?\n\n"
        "<b>הכל בדיסקרטיות מלאה 🛡️ — אל תציין שם, טלפון או כל פרט מזהה. נשארים כאן דמויות אנונימיות.</b>\n\n"
        "טוב חפרתי... עכשיו תורך! 😅"
    )

def error_human_funny_message():
    """
    הודעת שגיאה קומית ואנושית למשתמש במקרה של תקלה כללית.
    פלט: str
    """
    return (
        "אופס.. רגע.. קרתה תקלה. לא הצלחתי לקבל את התוכן של ההודעה שלך... "
        "שלחתי לעומר לתקן אותה. אני אנצל את הזמן רגע ללכת לשירותים (כן כן גם בוטים צריכים להתפנות ) "
        "תכתוב לי שוב בעוד דקה ונראה אם סיימתי בשירותים."
    )

def get_unsupported_message_response(message_type):
    """
    מחזיר הודעה מותאמת לסוג ההודעה שהתקבלה.
    קלט: message_type (str) - סוג ההודעה
    פלט: str - הודעה מותאמת
    """
    responses = {
        "voice": "🎤 שמעתי שיש לך הודעה קולית! אני מנסה לתמלל אותה עכשיו... אם לא אצליח, אתה יכול לכתוב לי את זה בטקסט 😊",
        "sticker": "😄 לצערי אני לא יכול לקרוא סטיקרים אבל אני בטוח שזה חמוד! בוא נמשיך בטקסט?",
        "photo": "📷 וואו, תמונה! אני רואה שיש משהו לשתף אבל לצערי אני עדיין לא יודע לראות תמונות. תוכל לכתוב לי מה זה?",
        "video": "🎬 סרטון מעניין! אני מצטער אבל אני עדיין לא יודע לצפות בסרטונים. תוכל לספר לי מה זה?",
        "document": "📄 קובץ! אני לא יכול לקרוא קבצים כרגע. תוכל לכתוב לי מה זה?",
        "audio": "🎵 מוזיקה! אני לא יכול להאזין למוזיקה כרגע. תוכל לכתוב לי מה זה?",
        "animation": "🎭 אנימציה! אני לא יכול לצפות באנימציות כרגע. תוכל לכתוב לי מה זה?",
        "video_note": "📹 הודעת וידאו קצרה! אני לא יכול לצפות בהודעות וידאו כרגע. תוכל לכתוב לי מה זה?",
        "location": "📍 מיקום! אני לא יכול לראות מיקומים כרגע. תוכל לכתוב לי איפה זה?",
        "contact": "👤 איש קשר! אני לא יכול לקרוא פרטי קשר כרגע. תוכל לכתוב לי מי זה?",
        "unknown": "🤔 לא ברור לי מה זה... תוכל לכתוב לי בטקסט?"
    }
    
    return responses.get(message_type, responses["unknown"])

def new_user_admin_message(chat_id):
    """
    הודעה לאדמין על משתמש חדש בצ'אט.
    קלט: chat_id (str/int)
    פלט: str
    """
    return f"איזה כיף! משתמש חדש מספר {chat_id} התחיל הרגע לדבר עם הצ'אט לראשונה!!"

def new_user_welcome_message():
    """
    הודעת קבלת פנים למשתמש חדש בצ'אט.
    פלט: str
    """
    return "ברוך הבא! איזה כיף שהצטרפת לצ'אט. אני כאן לכל שאלה או שיחה :)"
